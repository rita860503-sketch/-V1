
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>瑪雅密碼計算器｜單人 / 合盤</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- 背景：星空 + 漸層極光 -->
  <div class="bg">
    <canvas id="aurora"></canvas>
    <div class="stars"></div>
  </div>

  <main class="panel">
    <h1>瑪雅密碼計算器</h1>

    <div class="totem-wrap">
      <img class="totem" src="totem_v2.jpg" alt="瑪雅圖騰" />
    </div>

    <!-- 模式切換：單人 / 合盤 -->
    <div class="mode-tabs">
      <button id="tabSingle" class="tab-btn active">單人</button>
      <button id="tabMatch" class="tab-btn">合盤</button>
    </div>

    <!-- 表單 -->
    <section class="form">
      <div class="row">
        <div class="field" id="fieldDate1">
          <label id="labelDate1">西元生日 (A)</label>
          <input type="date" id="dateAD" placeholder="選擇日期" />
        </div>

        <div class="field hidden" id="fieldDate2">
          <label>對方生日 (B)</label>
          <input type="date" id="dateAD2" placeholder="選擇日期" />
        </div>

        <div class="field inline">
          <input type="checkbox" id="twinEnable" />
          <label for="twinEnable" style="margin-left:8px;">雙胞胎分流（輸入出生時間）</label>
        </div>

        <div class="field hidden" id="timeWrap">
          <label>出生時間（24hr）</label>
          <input type="time" id="birthTime" placeholder="09:30" />
        </div>
      </div>

      <div class="actions">
        <button id="btnCalc" class="btn">
          <span class="btn-text">開始計算</span>
          <span class="loader hidden"></span>
        </button>
        <button id="btnReset" class="btn ghost">清空</button>
      </div>
    </section>

    <!-- 單人結果 -->
    <section id="result" class="cards hidden">
      <div class="card">
        <div class="label">前世 A</div>
        <div id="valA" class="value">—</div>
        <div id="subA" class="sub">—</div>
      </div>
      <div class="card">
        <div class="label">今生 B</div>
        <div id="valB" class="value">—</div>
        <div id="subB" class="sub">—</div>
      </div>
      <div class="card full">
        <div class="label">潛意識 C</div>
        <div id="valC" class="value">—</div>
        <div id="subC" class="sub">—</div>
      </div>
      <div class="card">
        <div class="label">表象系統 D</div>
        <div id="valD" class="value">—</div>
        <div id="subD" class="sub">—</div>
      </div>
      <div class="card">
        <div class="label">小宇宙 E</div>
        <div id="valE" class="value">—</div>
        <div id="subE" class="sub">—</div>
      </div>
    </section>

    <!-- 合盤結果（含進階鎖） -->
    <section id="matchResult" class="match-container hidden">
      <div class="match-grid">
        <div class="p-col">
          <h3>A 方</h3>
          <pre id="mRes1" class="mini-res"></pre>
        </div>
        <div class="p-col">
          <h3>B 方</h3>
          <pre id="mRes2" class="mini-res"></pre>
        </div>
      </div>

      <div class="match-text">
        <h4>配對建議</h4>
        <div id="matchDesc"></div>
      </div>

      <div id="lockedArea" class="locked-box">
        <div class="lock-icon">🔒</div>
        <div>進階指數已鎖定，請輸入密碼查看（示範：123456）</div>
        <div class="unlock-form">
          <input id="passInput" placeholder="輸入密碼" />
          <button id="btnUnlock" class="btn">解鎖</button>
        </div>
        <div id="passError" class="error-msg hidden">密碼錯誤，請再試一次。</div>
      </div>

      <div id="unlockedArea" class="unlocked-box hidden">
        <div class="score-circle">
          <svg viewBox="0 0 36 36" class="circular-chart">
            <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
            <path id="scorePath" class="circle" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
            <text id="scoreText" x="18" y="20.35" class="percentage">0%</text>
          </svg>
          <div class="score-label">整體契合度</div>
        </div>
        <div id="chartBars" class="chart-bars"></div>
      </div>
    </section>
  </main>

  <script src="script.js"></script>
</body>
</html>
